<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<input type="text" placeholder="message" id="textbox">
<button id="button">Send</button>
<form>
    <input type="radio" name="channel" value="first" checked> First
    <input type="radio" name="channel" value="second"> Second<br>
</form>
<div id="box"></div>

<script>
    let channel = 'first';
    var socket = new WebSocket(`ws://localhost:8080/ws/${channel}`);

    var button = document.getElementById("button");
    button.addEventListener("click", function(event){
        var text = document.getElementById("textbox").value;
        socket.send(text);
    });

    socket.onopen = function(event){
        console.log("Socket opened successfully");
    }

    socket.onmessage = function(event){
        var box = document.createElement("div");
        box.innerHTML = event.data;
        document.getElementById("box").appendChild(box);
    }

    window.onbeforeunload = function(event){
        socket.close();
    }
</script>
</body>
</html>
